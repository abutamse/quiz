<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz App</title>
<style>
body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background: linear-gradient(to bottom,#6a11cb,#2575fc); display:flex; justify-content:center; align-items:center; min-height:100vh; }
.container { background:white; padding:20px; border-radius:20px; box-shadow:0 10px 25px rgba(0,0,0,0.3); width:95%; max-width:500px; transition: all 0.3s ease; }
h2,h3 { text-align:center; margin:10px 0; color:#333; }
button { width:100%; padding:12px; margin-top:10px; border:none; border-radius:10px; background:#4CAF50; color:white; font-weight:bold; cursor:pointer; font-size:16px; transition: all 0.2s ease; }
button:hover { background:#45a049; transform:scale(1.02); }
.hidden { display:none; }
.theme-block, .subtheme-block, .answer-btn { padding:18px; background:#e2e8f0; margin:10px 0; border-radius:15px; cursor:pointer; text-align:center; font-weight:bold; font-size:18px; transition: all 0.2s ease; }
.theme-block:hover, .subtheme-block:hover, .answer-btn:hover { background:#d1d5db; transform:scale(1.02); }
.flex { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.lang-btn { width:auto; padding:5px 10px; margin:0 5px; font-size:14px; background:#007BFF; color:white; border-radius:5px; cursor:pointer; }
.lang-btn:hover { background:#0056b3; transform:scale(1.05); }
.coin-display { font-weight:bold; background:#ffecb3; padding:5px 10px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
.progress-bar { width:100%; background:#ddd; border-radius:10px; overflow:hidden; margin-bottom:15px; height:20px; }
.progress-fill { height:100%; background:#4caf50; width:0%; transition: width 0.3s; }
</style>
</head>
<body>

<div class="container" id="login-container">
    <h2 id="title">Login / Registrierung</h2>
    <input type="text" id="username" placeholder="Benutzername">
    <input type="password" id="password" placeholder="Passwort">
    <button id="login-btn">Login</button>
    <button id="register-btn">Registrieren</button>
    <p id="login-msg" style="color:red; text-align:center;"></p>
</div>

<div class="container hidden" id="theme-container">
    <div class="flex">
        <h2 id="theme-title">Themen auswÃ¤hlen</h2>
        <div class="coin-display">Coins: <span id="coins">0</span>ðŸ’°</div>
    </div>
    <div id="lang-switch">
        <button class="lang-btn" data-lang="de">DE</button>
        <button class="lang-btn" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="ar">AR</button>
    </div>
    <div id="themes"></div>
    <button id="logout-btn" style="background:#f44336;">Logout</button>
</div>

<div class="container hidden" id="quiz-container">
    <div class="flex">
        <h2 id="quiz-topic"></h2>
        <div class="coin-display">Coins: <span id="quiz-coins">0</span>ðŸ’°</div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
    <div id="quiz-content"></div>
    <button id="quiz-back-btn" style="background:#f44336;">ZurÃ¼ck</button>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
let currentLang = 'de';
let currentUser = localStorage.getItem('currentUser');
let currentTopic, currentSubtopic, currentQuizIndex;

const loginContainer = document.getElementById('login-container');
const themeContainer = document.getElementById('theme-container');
const quizContainer = document.getElementById('quiz-container');
const loginMsg = document.getElementById('login-msg');
const usernameInput = document.getElementById('username');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('login-btn');
const registerBtn = document.getElementById('register-btn');
const logoutBtn = document.getElementById('logout-btn');
const themesDiv = document.getElementById('themes');
const coinsSpan = document.getElementById('coins');
const langButtons = document.querySelectorAll('.lang-btn');
const title = document.getElementById('title');
const themeTitle = document.getElementById('theme-title');
const quizTopic = document.getElementById('quiz-topic');
const quizCoins = document.getElementById('quiz-coins');
const quizContent = document.getElementById('quiz-content');
const progressFill = document.getElementById('progress-fill');
const quizBackBtn = document.getElementById('quiz-back-btn');

const topics = {
  "Geschichte": {"Deutschland":[{q:{de:"Wann begann der 2. Weltkrieg?",en:"When did WWII start?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ"},options:["1939","1945","1914","1923"],answer:"1939"},{q:{de:"Wer war der erste Bundeskanzler?",en:"Who was the first chancellor?",ar:"Ù…Ù† ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø£ÙˆÙ„ØŸ"},options:["Konrad Adenauer","Helmut Kohl","Angela Merkel","Willy Brandt"],answer:"Konrad Adenauer"}]},
  "Wissenschaft": {"Physik":[{q:{de:"Wer entwickelte die RelativitÃ¤tstheorie?",en:"Who developed the theory of relativity?",ar:"Ù…Ù† Ø·ÙˆØ± Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©ØŸ"},options:["Einstein","Newton","Tesla","Galileo"],answer:"Einstein"}]},
  "Geographie": {"Kontinente":[{q:{de:"Welcher ist der grÃ¶ÃŸte Kontinent?",en:"Which is the largest continent?",ar:"Ø£ÙŠ Ù‚Ø§Ø±Ø© Ù‡ÙŠ Ø§Ù„Ø£ÙƒØ¨Ø±ØŸ"},options:["Asien","Afrika","Europa","Antarktika"],answer:"Asien"}]} 
};

function getUser(username){return JSON.parse(localStorage.getItem('user_'+username));}
function saveUser(username,data){localStorage.setItem('user_'+username,JSON.stringify(data));}

langButtons.forEach(btn=>btn.addEventListener('click',()=>{currentLang=btn.dataset.lang; renderUI(); if(!themeContainer.classList.contains('hidden')) showThemes();}));

function renderUI(){
if(currentLang==='de'){title.textContent='Login / Registrierung'; loginBtn.textContent='Login'; registerBtn.textContent='Registrieren'; logoutBtn.textContent='Logout'; themeTitle.textContent='Themen auswÃ¤hlen'; quizBackBtn.textContent='ZurÃ¼ck';}
else if(currentLang==='en'){title.textContent='Login / Register'; loginBtn.textContent='Login'; registerBtn.textContent='Register'; logoutBtn.textContent='Logout'; themeTitle.textContent='Select Topics'; quizBackBtn.textContent='Back';}
else if(currentLang==='ar'){title.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø§Ù„ØªØ³Ø¬ÙŠÙ„'; loginBtn.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'; registerBtn.textContent='ØªØ³Ø¬ÙŠÙ„'; logoutBtn.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬'; themeTitle.textContent='Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹'; quizBackBtn.textContent='Ø¹ÙˆØ¯Ø©';}
}

registerBtn.addEventListener('click',()=>{
let username=usernameInput.value.trim(); let password=passwordInput.value.trim();
if(!username||!password){loginMsg.textContent=(currentLang==='de')?'Bitte ausfÃ¼llen!':(currentLang==='en')?'Please fill in!':'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª'; return;}
if(localStorage.getItem('user_'+username)){loginMsg.textContent=(currentLang==='de')?'Benutzer existiert schon!':(currentLang==='en')?'User already exists!':'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„'; return;}
localStorage.setItem('user_'+username,JSON.stringify({password,coins:0,progress:{}}));
localStorage.setItem('currentUser',username); currentUser=username;
showThemes();
});

loginBtn.addEventListener('click',()=>{
let username=usernameInput.value.trim(); let password=passwordInput.value.trim();
let userData=getUser(username);
if(!userData){loginMsg.textContent=(currentLang==='de')?'Benutzer nicht gefunden!':(currentLang==='en')?'User not found!':'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯'; return;}
if(userData.password!==password){loginMsg.textContent=(currentLang==='de')?'Falsches Passwort!':(currentLang==='en')?'Wrong password!':'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©'; return;}
localStorage.setItem('currentUser',username); currentUser=username;
showThemes();
});

logoutBtn.addEventListener('click',()=>{localStorage.removeItem('currentUser'); location.reload();});

function showThemes(){
loginContainer.classList.add('hidden'); themeContainer.classList.remove('hidden');
const userData=getUser(currentUser); coinsSpan.textContent=userData.coins;
themesDiv.innerHTML='';
for(const topic in topics){
const div=document.createElement('div'); div.className='theme-block'; div.textContent=topic;
div.addEventListener('click',()=>showSubtopics(topic));
themesDiv.appendChild(div);
}
}

function showSubtopics(topic){
currentTopic=topic; themesDiv.innerHTML='';
for(const sub in topics[topic]){
const div=document.createElement('div'); div.className='subtheme-block'; div.textContent=sub;
div.addEventListener('click',()=>startQuiz(sub));
themesDiv.appendChild(div);
}
}

function startQuiz(subtopic){
currentSubtopic=subtopic;
const userData=getUser(currentUser);
const progressKey=currentTopic+'_'+currentSubtopic;
currentQuizIndex=userData.progress[progressKey]||0;
themeContainer.classList.add('hidden'); quizContainer.classList.remove('hidden');
quizTopic.textContent=currentTopic+' - '+currentSubtopic;
quizCoins.textContent=userData.coins;
renderQuiz();
}

function renderQuiz(){
const quizArr=topics[currentTopic][currentSubtopic];
if(currentQuizIndex>=quizArr.length){
alert((currentLang==='de')?'Quiz beendet! +20 Coins':'Quiz finished! +20 coins');
const userData=getUser(currentUser); userData.coins+=20;
saveUser(currentUser,userData); quizCoins.textContent=userData.coins;
quizContainer.classList.add('hidden'); showSubtopics(currentTopic); return;
}
const q=quizArr[currentQuizIndex];
let options=[...q.options]; options.sort(()=>Math.random()-0.5);
quizContent.innerHTML='';
options.forEach(opt=>{
const btn=document.createElement('button'); btn.className='answer-btn'; btn.textContent=opt;
btn.addEventListener('click',()=>{
const userData=getUser(currentUser);
if(opt===q.answer){
alert((currentLang==='de')?'Richtig!':(currentLang==='en')?'Correct!':'ØµØ­ÙŠØ­!');
userData.coins+=25; userData.progress[currentTopic+'_'+currentSubtopic]=currentQuizIndex+1;
saveUser(currentUser,userData); quizCoins.textContent=userData.coins; currentQuizIndex++; renderQuiz();
}else{alert((currentLang==='de')?'Falsch!':(currentLang==='en')?'Wrong!':'Ø®Ø·Ø£!');}
}); quizContent.appendChild(btn);
});
const helpBtn=document.createElement('button'); helpBtn.textContent=(currentLang==='de')?'Hilfe (100 MÃ¼nzen)':'Help (100 coins)';
helpBtn.addEventListener('click',()=>{
const userData=getUser(currentUser);
if(userData.coins>=100){userData.coins-=100; saveUser(currentUser,userData); quizCoins.textContent=userData.coins;
let removed=0; document.querySelectorAll('.answer-btn').forEach(btn=>{if(btn.textContent!==q.answer && removed<2){btn.style.display='none'; removed++;}});
}else{alert((currentLang==='de')?'Nicht genug MÃ¼nzen!':(currentLang==='en')?'Not enough coins!':'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Øª ÙƒØ§ÙÙŠØ©!');}
});
quizContent.appendChild(helpBtn);
const progressPercent=(currentQuizIndex/quizArr.length)*100; progressFill.style.width=progressPercent+'%';
}

quizBackBtn.addEventListener('click',()=>{quizContainer.classList.add('hidden'); showSubtopics(currentTopic);});

if(currentUser) showThemes(); renderUI();
});
</script>

</body>
</html>
