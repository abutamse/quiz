<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>GroÃŸe Quiz App</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#4e54c8;display:flex;justify-content:center;align-items:center;min-height:100vh}
.container{background:#fff;padding:20px;border-radius:16px;width:95%;max-width:600px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
.hidden{display:none}
button{width:100%;padding:12px;margin-top:10px;border:none;border-radius:10px;background:#4caf50;color:#fff;font-size:16px;cursor:pointer}
button:hover{opacity:.9}
.block{background:#e5e7eb;padding:15px;margin:10px 0;border-radius:12px;text-align:center;font-weight:bold;cursor:pointer}
.progress{background:#ddd;height:18px;border-radius:10px;overflow:hidden;margin-bottom:10px}
.progress div{height:100%;background:#4caf50;width:0%}
input{width:100%;padding:10px;margin:6px 0;border-radius:8px;border:1px solid #ccc}
.coin{background:#fde68a;padding:6px 10px;border-radius:10px;font-weight:bold}
</style>
</head>
<body>

<div class="container" id="login">
<h2>Login / Registrierung</h2>
<input id="user" placeholder="Benutzername">
<input id="pass" type="password" placeholder="Passwort">
<button onclick="login()">Login</button>
<button onclick="register()">Registrieren</button>
<p id="msg" style="color:red;text-align:center"></p>
</div>

<div class="container hidden" id="themes">
<div style="display:flex;justify-content:space-between">
<h2>Themen</h2>
<div class="coin">ðŸ’° <span id="coins">0</span></div>
</div>
<div id="themeList"></div>
<button onclick="logout()" style="background:#ef4444">Logout</button>
</div>

<div class="container hidden" id="quiz">
<h3 id="quizTitle"></h3>
<div class="progress"><div id="bar"></div></div>
<div id="q"></div>
<div id="a"></div>
<button onclick="back()" style="background:#ef4444">ZurÃ¼ck</button>
</div>

<script>
// ---------------- USERS ----------------
function getUser(u){return JSON.parse(localStorage.getItem("u_"+u))}
function saveUser(u,d){localStorage.setItem("u_"+u,JSON.stringify(d))}

function register(){
let u=user.value.trim(),p=pass.value
if(!u||!p){msg.textContent="Felder leer";return}
if(getUser(u)){msg.textContent="User existiert";return}
saveUser(u,{pass,coins:0})
localStorage.currentUser=u
start()
}

function login(){
let u=user.value.trim(),p=pass.value
let d=getUser(u)
if(!d||d.pass!==p){msg.textContent="Login falsch";return}
localStorage.currentUser=u
start()
}

function logout(){localStorage.removeItem("currentUser");location.reload()}

// ---------------- QUIZ DATA ----------------
const topics=["Geschichte","Mathe","Physik","Biologie","Chemie","Geographie","Sport","Musik","Kunst","Technik"]

const quizData={}
topics.forEach(t=>{
quizData[t]=[]
for(let i=1;i<=20;i++){
quizData[t].push({
q:`${t}: Frage ${i}`,
opts:[
`Antwort A ${i}`,
`Antwort B ${i}`,
`Antwort C ${i}`,
`Antwort D ${i}`
],
correct:Math.floor(Math.random()*4)
})
}
})

// ---------------- APP ----------------
let userName,topic,idx=0

function start(){
login.classList.add("hidden")
themes.classList.remove("hidden")
userName=localStorage.currentUser
coins.textContent=getUser(userName).coins
renderThemes()
}

function renderThemes(){
themeList.innerHTML=""
topics.forEach(t=>{
let d=document.createElement("div")
d.className="block"
d.textContent=t
d.onclick=()=>startQuiz(t)
themeList.appendChild(d)
})
}

function startQuiz(t){
topic=t
idx=0
themes.classList.add("hidden")
quiz.classList.remove("hidden")
showQ()
}

function showQ(){
let qs=quizData[topic]
if(idx>=qs.length){
let u=getUser(userName)
u.coins+=20
saveUser(userName,u)
alert("Quiz fertig! +20 Coins")
back()
return
}
bar.style.width=(idx/qs.length*100)+"%"
quizTitle.textContent=topic+" ("+(idx+1)+"/"+qs.length+")"
q.textContent=qs[idx].q
a.innerHTML=""
let order=[0,1,2,3].sort(()=>Math.random()-0.5)
order.forEach(i=>{
let b=document.createElement("button")
b.textContent=qs[idx].opts[i]
b.onclick=()=>{
if(i===qs[idx].correct){
let u=getUser(userName)
u.coins+=1
saveUser(userName,u)
}
idx++
showQ()
}
a.appendChild(b)
})
}

function back(){
quiz.classList.add("hidden")
themes.classList.remove("hidden")
coins.textContent=getUser(userName).coins
}

if(localStorage.currentUser)start()
</script>

</body>
</html>
