<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Big Quiz</title>

<style>
body{
  font-family:'Segoe UI',Tahoma,sans-serif;
  margin:0;
  background:linear-gradient(to bottom,#6a11cb,#2575fc);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
[dir="rtl"]{direction:rtl;text-align:right;}

.container{
  background:#fff;
  padding:20px;
  border-radius:20px;
  width:95%;
  max-width:600px;
  box-shadow:0 10px 25px rgba(0,0,0,0.3);
}
.hidden{display:none;}
h2,h3{text-align:center;}

button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:10px;
  background:#4CAF50;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.theme,.sub,.answer{
  background:#4CAF50;
  color:white;
  padding:16px;
  margin:10px 0;
  border-radius:15px;
  text-align:center;
  cursor:pointer;
}

.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.badge{
  background:#ffecb3;
  padding:5px 10px;
  border-radius:10px;
  font-weight:bold;
}

.lang-btn{
  width:auto;
  padding:5px 10px;
  font-size:14px;
  background:#007BFF;
  margin:0 3px;
}

input{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ccc;
  text-align:center;
}

.progress{
  width:100%;
  height:20px;
  background:#ddd;
  border-radius:10px;
  overflow:hidden;
}
.fill{
  height:100%;
  background:#4CAF50;
  width:0%;
}

#result{
  margin-top:10px;
  padding:10px;
  text-align:center;
  font-weight:bold;
  border-radius:10px;
  display:none;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="container" id="loginBox">
  <h2 id="loginTitle">Login / Registrierung</h2>
  <input id="username" placeholder="Benutzername">
  <input id="password" type="password" placeholder="Passwort">
  <button onclick="login()">Login</button>
  <button onclick="register()">Registrieren</button>
  <p id="loginMsg" style="color:red;text-align:center;"></p>
</div>

<!-- THEMEN -->
<div class="container hidden" id="themeBox">
  <div class="top">
    <h2 id="themeTitle"></h2>
    <div class="badge">üí∞ <span id="coins">0</span> | ‚≠ê <span id="level">1</span></div>
  </div>

  <div>
    <button class="lang-btn" onclick="setLang('de')">DE</button>
    <button class="lang-btn" onclick="setLang('en')">EN</button>
    <button class="lang-btn" onclick="setLang('ar')">AR</button>
  </div>

  <div id="themes"></div>
  <button style="background:#f44336" onclick="logout()">Logout</button>
</div>

<!-- QUIZ -->
<div class="container hidden" id="quizBox">
  <div class="top">
    <h3 id="quizTitle"></h3>
    <div class="badge">üí∞ <span id="quizCoins">0</span></div>
  </div>

  <div class="progress"><div class="fill" id="fill"></div></div>
  <div id="question"></div>
  <div id="answers"></div>
  <div id="result"></div>

  <button style="background:#f44336" onclick="backToSub()">
    ‚¨Ö Zur√ºck
  </button>
</div>

<script>
// ================== QUIZDATEN ==================
const quizData={
  Geschichte:{
    label:{de:"Geschichte",en:"History",ar:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"},
    Deutschland:{
      label:{de:"Deutschland",en:"Germany",ar:"ÿ£ŸÑŸÖÿßŸÜŸäÿß"},
      questions:[
        {
          q:{de:"Wann begann der 2. Weltkrieg?",en:"When did WWII start?",ar:"ŸÖÿ™Ÿâ ÿ®ÿØÿ£ÿ™ ÿßŸÑÿ≠ÿ±ÿ® ÿßŸÑÿπÿßŸÑŸÖŸäÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ©ÿü"},
          options:{
            de:["1939","1945","1914","1923"],
            en:["1939","1945","1914","1923"],
            ar:["1939","1945","1914","1923"]
          },
          answer:{de:"1939",en:"1939",ar:"1939"}
        }
      ]
    }
  },
  Wissenschaft:{
    label:{de:"Wissenschaft",en:"Science",ar:"ÿßŸÑÿπŸÑŸàŸÖ"},
    Physik:{
      label:{de:"Physik",en:"Physics",ar:"ÿßŸÑŸÅŸäÿ≤Ÿäÿßÿ°"},
      questions:[
        {
          q:{de:"Wer entwickelte die Relativit√§tstheorie?",en:"Who developed relativity?",ar:"ŸÖŸÜ ÿ∑Ÿàÿ± ŸÜÿ∏ÿ±Ÿäÿ© ÿßŸÑŸÜÿ≥ÿ®Ÿäÿ©ÿü"},
          options:{
            de:["Einstein","Newton","Tesla","Galileo"],
            en:["Einstein","Newton","Tesla","Galileo"],
            ar:["ÿ¢ŸäŸÜÿ¥ÿ™ÿßŸäŸÜ","ŸÜŸäŸàÿ™ŸÜ","ÿ™ÿ≥ŸÑÿß","ÿ∫ÿßŸÑŸäŸÑŸäŸà"]
          },
          answer:{de:"Einstein",en:"Einstein",ar:"ÿ¢ŸäŸÜÿ¥ÿ™ÿßŸäŸÜ"}
        }
      ]
    }
  },
  TextQuiz:{
    label:{de:"Text Quiz",en:"Text Quiz",ar:"ÿßÿÆÿ™ÿ®ÿßÿ± ŸÜÿµŸä"},
    R√§tsel:{
      label:{de:"R√§tsel",en:"Riddle",ar:"ŸÑÿ∫ÿ≤"},
      questions:[
        {
          q:{de:"Ein Tier, das miaut",en:"An animal that meows",ar:"ÿ≠ŸäŸàÿßŸÜ ŸäÿµÿØÿ± ŸÖŸàÿßÿ°"},
          answer:{de:"Katze",en:"Cat",ar:"ŸÇÿ∑ÿ©"}
        }
      ]
    }
  }
};

// ================== STATE ==================
let lang="de";
let topic=null,sub=null,index=0;
let coins=Number(localStorage.getItem("coins"))||0;
let level=Number(localStorage.getItem("level"))||1;

// ================== UTIL ==================
const shuffle=a=>[...a].sort(()=>Math.random()-0.5);

// ================== SPRACHE ==================
function setLang(l){
  lang=l;
  document.documentElement.dir=l==="ar"?"rtl":"ltr";
  renderThemes();
}

// ================== LOGIN ==================
function login(){
  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("themeBox").classList.remove("hidden");
  renderThemes();
}
function register(){ login(); }
function logout(){
  document.getElementById("themeBox").classList.add("hidden");
  document.getElementById("loginBox").classList.remove("hidden");
}

// ================== THEMEN ==================
function renderThemes(){
  document.getElementById("themes").innerHTML="";
  document.getElementById("themeTitle").textContent=
    lang==="de"?"Themen ausw√§hlen":
    lang==="en"?"Select topics":"ÿßÿÆÿ™ÿ± ÿßŸÑŸÖŸàÿ∂Ÿàÿπ";

  Object.keys(quizData).forEach(t=>{
    const d=document.createElement("div");
    d.className="theme";
    d.textContent=quizData[t].label[lang];
    d.onclick=()=>renderSubs(t);
    document.getElementById("themes").appendChild(d);
  });

  updateStats();
}

// ================== SUBTHEMEN ==================
function renderSubs(t){
  topic=t;
  const box=document.getElementById("themes");
  box.innerHTML="";

  Object.keys(quizData[t]).forEach(s=>{
    if(s==="label")return;
    const d=document.createElement("div");
    d.className="sub";
    d.textContent=quizData[t][s].label[lang];
    d.onclick=()=>startQuiz(s);
    box.appendChild(d);
  });

  const back=document.createElement("button");
  back.textContent=lang==="de"?"‚¨Ö Zur√ºck":"‚¨Ö Back";
  back.style.background="#f44336";
  back.onclick=renderThemes;
  box.appendChild(back);
}

// ================== QUIZ ==================
function startQuiz(s){
  sub=s; index=0;
  document.getElementById("themeBox").classList.add("hidden");
  document.getElementById("quizBox").classList.remove("hidden");
  showQuestion();
}

function showQuestion(){
  const q=quizData[topic][sub].questions[index];
  if(!q){ backToSub(); return; }

  document.getElementById("quizTitle").textContent=
    quizData[topic][sub].label[lang];

  document.getElementById("question").textContent=q.q[lang];
  const a=document.getElementById("answers");
  a.innerHTML="";

  if(q.options){
    shuffle(q.options[lang]).forEach(o=>{
      const b=document.createElement("button");
      b.className="answer";
      b.textContent=o;
      b.onclick=()=>check(o);
      a.appendChild(b);
    });
  }else{
    const input=document.createElement("input");
    input.id="textAnswer";
    a.appendChild(input);
    const btn=document.createElement("button");
    btn.textContent=lang==="de"?"Antworten":"Submit";
    btn.onclick=()=>checkText(input.value);
    a.appendChild(btn);
  }

  document.getElementById("quizCoins").textContent=coins;
  document.getElementById("fill").style.width=
    (index/quizData[topic][sub].questions.length*100)+"%";
}

// ================== CHECK ==================
function check(ans){
  const q=quizData[topic][sub].questions[index];
  showResult(ans===q.answer[lang]);
}
function checkText(ans){
  const q=quizData[topic][sub].questions[index];
  showResult(ans.trim().toLowerCase()===q.answer[lang].toLowerCase());
}

function showResult(correct){
  const r=document.getElementById("result");
  if(correct){
    coins+=25;
    if(coins>=level*100)level++;
    r.textContent=lang==="de"?"Richtig!":"Correct!";
    r.style.background="#4CAF50";
  }else{
    r.textContent=lang==="de"?"Falsch!":"Wrong!";
    r.style.background="#f44336";
  }
  localStorage.setItem("coins",coins);
  localStorage.setItem("level",level);
  updateStats();
  r.style.display="block";
  index++;
  setTimeout(()=>{r.style.display="none";showQuestion();},1000);
}

// ================== BACK ==================
function backToSub(){
  document.getElementById("quizBox").classList.add("hidden");
  document.getElementById("themeBox").classList.remove("hidden");
  renderSubs(topic);
}

// ================== STATS ==================
function updateStats(){
  document.getElementById("coins").textContent=coins;
  document.getElementById("level").textContent=level;
}
</script>

</body>
</html>
