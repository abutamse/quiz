<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GroÃŸe Quiz App</title>
<style>
body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background: linear-gradient(to bottom,#6a11cb,#2575fc); display:flex; justify-content:center; align-items:center; min-height:100vh; }
.container { background:white; padding:20px; border-radius:20px; box-shadow:0 10px 25px rgba(0,0,0,0.3); width:95%; max-width:600px; transition: all 0.3s ease; }
h2,h3 { text-align:center; margin:10px 0; color:#333; }
button { width:100%; padding:12px; margin-top:10px; border:none; border-radius:10px; background:#4CAF50; color:white; font-weight:bold; cursor:pointer; font-size:16px; transition: all 0.2s ease; }
button:hover { background:#45a049; transform:scale(1.02); }
.hidden { display:none; }
.theme-block, .subtheme-block, .answer-btn { padding:18px; background:#4CAF50; margin:10px 0; border-radius:15px; cursor:pointer; text-align:center; font-weight:bold; font-size:18px; color:white; transition: all 0.2s ease; }
.theme-block:hover, .subtheme-block:hover, .answer-btn:hover { background:#45a049; transform:scale(1.02); }
.flex { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.lang-btn { width:auto; padding:5px 10px; margin:0 5px; font-size:14px; background:#007BFF; color:white; border-radius:5px; cursor:pointer; }
.lang-btn:hover { background:#0056b3; transform:scale(1.05); }
.coin-display { font-weight:bold; background:#ffecb3; padding:5px 10px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
.progress-bar { width:100%; background:#ddd; border-radius:10px; overflow:hidden; margin-bottom:15px; height:20px; }
.progress-fill { height:100%; background:#4caf50; width:0%; transition: width 0.3s; }
input { width:100%; padding:10px; margin:5px 0; border-radius:10px; border:1px solid #ccc; font-size:16px; text-align:center; letter-spacing:3px; }
#result-msg { text-align:center; font-size:18px; margin-top:10px; font-weight:bold; border-radius:10px; padding:10px; display:none; }
#help-btn { background:#ff9800; margin-top:5px; }
#back-btn { background:#f44336; margin-top:10px; }
</style>
</head>
<body>
<div class="container" id="login-container">
  <h2 id="title">Login / Registrierung</h2>
  <input type="text" id="username" placeholder="Benutzername">
  <input type="password" id="password" placeholder="Passwort">
  <button id="login-btn">Login</button>
  <button id="register-btn">Registrieren</button>
  <p id="login-msg" style="color:red; text-align:center;"></p>
</div>

<div class="container hidden" id="theme-container">
  <div class="flex">
    <h2 id="theme-title">Themen auswÃ¤hlen</h2>
    <div class="coin-display">Coins: <span id="coins">0</span>ðŸ’°</div>
  </div>
  <div id="lang-switch">
    <button class="lang-btn" data-lang="de">DE</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="ar">AR</button>
  </div>
  <div id="themes"></div>
  <button id="logout-btn" style="background:#f44336;">Logout</button>
</div>

<div class="container hidden" id="quiz-container">
  <div class="flex">
    <h2 id="quiz-topic"></h2>
    <div class="coin-display">Coins: <span id="quiz-coins">0</span>ðŸ’°</div>
  </div>
  <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  <div id="quiz-content"></div>
  <button id="help-btn">Hilfe (100ðŸ’°)</button>
  <div id="result-msg"></div>
  <button id="quiz-back-btn" style="background:#f44336;">ZurÃ¼ck zum Thema</button>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
let currentLang='de', currentUser=localStorage.getItem('currentUser');
let currentTopic='', currentSubtopic='', currentQuizIndex=0;
const loginContainer=document.getElementById('login-container');
const themeContainer=document.getElementById('theme-container');
const quizContainer=document.getElementById('quiz-container');
const loginMsg=document.getElementById('login-msg');
const usernameInput=document.getElementById('username');
const passwordInput=document.getElementById('password');
const loginBtn=document.getElementById('login-btn');
const registerBtn=document.getElementById('register-btn');
const logoutBtn=document.getElementById('logout-btn');
const themesDiv=document.getElementById('themes');
const coinsSpan=document.getElementById('coins');
const langButtons=document.querySelectorAll('.lang-btn');
const title=document.getElementById('title');
const themeTitle=document.getElementById('theme-title');
const quizTopic=document.getElementById('quiz-topic');
const quizCoins=document.getElementById('quiz-coins');
const quizContent=document.getElementById('quiz-content');
const progressFill=document.getElementById('progress-fill');
const quizBackBtn=document.getElementById('quiz-back-btn');
const helpBtn=document.getElementById('help-btn');
const resultMsg=document.getElementById('result-msg');

// ===== User Funktionen =====
function getUser(u){return JSON.parse(localStorage.getItem('user_'+u));}
function saveUser(u,d){localStorage.setItem('user_'+u,JSON.stringify(d));}

// Sprachumschaltung
langButtons.forEach(btn=>{
btn.addEventListener('click',()=>{
currentLang=btn.dataset.lang;
renderUI();
if(!themeContainer.classList.contains('hidden')) showThemes();
});
});

function renderUI(){
if(currentLang==='de'){title.textContent='Login / Registrierung';loginBtn.textContent='Login';registerBtn.textContent='Registrieren';logoutBtn.textContent='Logout';themeTitle.textContent='Themen auswÃ¤hlen';quizBackBtn.textContent='ZurÃ¼ck zum Thema';helpBtn.textContent='Hilfe (100ðŸ’°)';}
else if(currentLang==='en'){title.textContent='Login / Register';loginBtn.textContent='Login';registerBtn.textContent='Register';logoutBtn.textContent='Logout';themeTitle.textContent='Select Topics';quizBackBtn.textContent='Back to Topic';helpBtn.textContent='Help (100ðŸ’°)';}
else if(currentLang==='ar'){title.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø§Ù„ØªØ³Ø¬ÙŠÙ„';loginBtn.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';registerBtn.textContent='ØªØ³Ø¬ÙŠÙ„';logoutBtn.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';themeTitle.textContent='Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹';quizBackBtn.textContent='Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹';helpBtn.textContent='Ù…Ø³Ø§Ø¹Ø¯Ø© (100ðŸ’°)';}
}

// ===== Dummy-Quizdaten =====
const quizData={
"Geschichte":{"Deutschland":[{q:{de:"Wann begann der 2. Weltkrieg?",en:"When did WWII start?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ"},options:["1939","1945","1914","1923"],answer:"1939"}]},
"Wissenschaft":{"Physik":[{q:{de:"Wer entwickelte die RelativitÃ¤tstheorie?",en:"Who developed relativity?",ar:"Ù…Ù† Ø·ÙˆØ± Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©ØŸ"},options:["Einstein","Newton","Tesla","Galileo"],answer:"Einstein"}]},
"TextQuiz":{"RÃ¤tsel":[{q:{de:"Ein Tier, das miaut",en:"A animal that meows",ar:"Ø­ÙŠÙˆØ§Ù† ÙŠØµØ¯Ø± Ù…ÙˆØ§Ø¡"},answer:"Katze"}]},
"Geheim":{"TopSecret":[{q:{de:"Geheimes Quiz",en:"Secret quiz",ar:"Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠ"},options:["A","B","C","D"],answer:"A"}]}
};

// ===== Themenanzeigen =====
function showThemes(){themesDiv.innerHTML=''; Object.keys(quizData).forEach(topic=>{
let div=document.createElement('div'); div.className='theme-block'; div.textContent=topic; div.onclick=()=>showSubtopics(topic); themesDiv.appendChild(div);
});}

function showSubtopics(topic){currentTopic=topic; themesDiv.innerHTML=''; Object.keys(quizData[topic]).forEach(subtopic=>{
let div=document.createElement('div'); div.className='subtheme-block'; div.textContent=subtopic; div.onclick=()=>startQuiz(subtopic); themesDiv.appendChild(div);
});
const backBtn=document.createElement('button'); backBtn.id='back-btn'; backBtn.textContent=currentLang==='de'?"ZurÃ¼ck":currentLang==='en'?"Back":"Ø¹ÙˆØ¯Ø©"; backBtn.onclick=()=>showThemes(); themesDiv.appendChild(backBtn);
}

// ===== Quiz starten =====
function startQuiz(subtopic){
currentSubtopic=subtopic;
currentQuizIndex=0;
themeContainer.classList.add('hidden');
quizContainer.classList.remove('hidden');
quizCoins.textContent=coinsSpan.textContent;
showQuestion();
}

function showQuestion(){
resultMsg.style.display='none';
const questions=quizData[currentTopic][currentSubtopic];
if(currentQuizIndex>=questions.length){
alert(currentLang==='de'?"Quiz beendet!":currentLang==='en'?"Quiz finished!":"Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±!");
quizContainer.classList.add('hidden');
themeContainer.classList.remove('hidden');
return;
}
const q=questions[currentQuizIndex];
quizTopic.textContent=currentSubtopic+" - "+(currentQuizIndex+1)+"/"+questions.length;
progressFill.style.width=((currentQuizIndex)/questions.length*100)+'%';
quizContent.innerHTML='';

const questionElem=document.createElement('h3');
questionElem.textContent=q.q[currentLang];
quizContent.appendChild(questionElem);

if(q.options){ // Multiple Choice
q.options.forEach(opt=>{
const btn=document.createElement('button');
btn.className='answer-btn'; btn.textContent=opt; btn.onclick=()=>checkAnswer(opt); quizContent.appendChild(btn);
});
}else{ // TextQuiz
const input=document.createElement('input'); input.id='text-answer'; input.placeholder='_'.repeat(q.answer.length); quizContent.appendChild(input);
const submitBtn=document.createElement('button'); submitBtn.textContent=currentLang==='de'?"Antworten":currentLang==='en'?"Submit":"Ø¥Ø±Ø³Ø§Ù„"; submitBtn.onclick=()=>checkTextAnswer(document.getElementById('text-answer').value); quizContent.appendChild(submitBtn);
}
}

// ===== Antwort prÃ¼fen =====
function showResultMsg(correct){
resultMsg.style.display='block';
if(correct){resultMsg.textContent=currentLang==='de'?"Richtig!":currentLang==='en'?"Correct!":"ØµØ­ÙŠØ­!"; resultMsg.style.background="#4CAF50";}
else{resultMsg.textContent=currentLang==='de'?"Falsch!":currentLang==='en'?"Wrong!":"Ø®Ø·Ø£!"; resultMsg.style.background="#f44336";}
setTimeout(()=>{resultMsg.style.display='none'; showQuestion();},1000);
}

function checkAnswer(ans){
const questions=quizData[currentTopic][currentSubtopic];
if(ans===questions[currentQuizIndex].answer){
coinsSpan.textContent=parseInt(coinsSpan.textContent)+1; quizCoins.textContent=coinsSpan.textContent; showResultMsg(true);
}else showResultMsg(false);
currentQuizIndex++;
}

function checkTextAnswer(ans){
const questions=quizData[currentTopic][currentSubtopic];
if(ans.toLowerCase()===questions[currentQuizIndex].answer.toLowerCase()){
coinsSpan.textContent=parseInt(coinsSpan.textContent)+1; quizCoins.textContent=coinsSpan.textContent; showResultMsg(true);
}else showResultMsg(false);
currentQuizIndex++;
}

// ===== Quiz zurÃ¼ck =====
quizBackBtn.onclick=()=>{ quizContainer.classList.add('hidden'); themeContainer.classList.remove('hidden'); showThemes(); }

// ===== Hilfe-Button =====
helpBtn.onclick=()=>{
if(parseInt(coinsSpan.textContent)<100){ alert(currentLang==='de'?"Nicht genug Coins!":"Not enough coins!"); return; }
coinsSpan.textContent=parseInt(coinsSpan.textContent)-100; quizCoins.textContent=coinsSpan.textContent;
const q=quizData[currentTopic][currentSubtopic][currentQuizIndex];
if(q.options){
let wrongs=q.options.filter(o=>o!==q.answer);
if(wrongs.length>1) wrongs=wrongs.slice(0,2);
q.options=q.options.filter(o=>!wrongs.includes(o));
showQuestion();
}else{ // Textquiz
const input=document.getElementById('text-answer'); if(input){ input.value=q.answer.substring(0,2); }
}
}

// ===== Login/Register =====
loginBtn.onclick=()=>{
const u=usernameInput.value.trim(); const p=passwordInput.value;
if(!u || !p){loginMsg.textContent=currentLang==='de'?"Bitte ausfÃ¼llen":currentLang==='en'?"Please fill in":"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„"; return;}
const user=getUser(u);
if(user && user.password===p){currentUser=u; localStorage.setItem('currentUser',u); loginContainer.classList.add('hidden'); themeContainer.classList.remove('hidden'); showThemes();}
else loginMsg.textContent=currentLang==='de'?"Falscher Login":currentLang==='en'?"Wrong login":"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø®Ø§Ø·Ø¦";
}

registerBtn.onclick=()=>{
const u=usernameInput.value.trim(); const p=passwordInput.value;
if(!u || !p){loginMsg.textContent=currentLang==='de'?"Bitte ausfÃ¼llen":currentLang==='en'?"Please fill in":"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„"; return;}
if(getUser(u)){loginMsg.textContent=currentLang==='de'?"Benutzer existiert":currentLang==='en'?"User exists":"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯"; return;}
saveUser(u,{password:p,coins:0}); loginMsg.textContent=currentLang==='de'?"Registriert!":currentLang==='en'?"Registered!":"ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„!";
}

logoutBtn.onclick=()=>{
localStorage.removeItem('currentUser'); currentUser=null; loginContainer.classList.remove('hidden'); themeContainer.classList.add('hidden');
}

// ===== Initialisierung =====
renderUI();
if(currentUser){ loginContainer.classList.add('hidden'); themeContainer.classList.remove('hidden'); showThemes(); }

});
</script>
</body>
</html>
