<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz App</title>
<style>
    /* Grundlayout */
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background: linear-gradient(to bottom,#6a11cb,#2575fc); display:flex; justify-content:center; align-items:center; min-height:100vh; }
    .container { background:white; padding:20px; border-radius:20px; box-shadow:0 10px 25px rgba(0,0,0,0.3); width:95%; max-width:400px; transition: all 0.3s ease; }
    h2,h3 { text-align:center; margin:10px 0; color:#333; }
    input { width:100%; padding:12px; margin:5px 0; border-radius:10px; border:1px solid #ccc; font-size:16px; box-sizing:border-box; }
    button { width:100%; padding:12px; margin-top:10px; border:none; border-radius:10px; background:#4CAF50; color:white; font-weight:bold; cursor:pointer; font-size:16px; transition: all 0.2s ease; }
    button:hover { background:#45a049; transform:scale(1.02); }
    .hidden { display:none; }
    .theme-block, .subtheme-block { padding:18px; background:#e2e8f0; margin:10px 0; border-radius:15px; cursor:pointer; text-align:center; font-weight:bold; font-size:18px; transition: all 0.2s ease; }
    .theme-block:hover, .subtheme-block:hover { background:#d1d5db; transform:scale(1.02); }
    .coin { float:right; font-weight:bold; }
    .quiz-box { margin-top:20px; }
    .quiz-box input { margin-bottom:10px; }
    .flex { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
    .lang-btn { width:auto; padding:5px 10px; margin:0 5px; font-size:14px; background:#007BFF; color:white; border-radius:5px; cursor:pointer; }
    .lang-btn:hover { background:#0056b3; transform:scale(1.05); }
    .coin-display { font-weight:bold; background:#ffecb3; padding:5px 10px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
</style>
</head>
<body>

<!-- Login / Registrierung -->
<div class="container" id="login-container">
    <h2 id="title">Login / Registrierung</h2>
    <input type="text" id="username" placeholder="Benutzername">
    <input type="password" id="password" placeholder="Passwort">
    <button id="login-btn">Login</button>
    <button id="register-btn">Registrieren</button>
    <p id="login-msg" style="color:red; text-align:center;"></p>
</div>

<!-- Themen & Quiz -->
<div class="container hidden" id="theme-container">
    <div class="flex">
        <h2 id="theme-title">Themen auswÃ¤hlen</h2>
        <div class="coin-display">Coins: <span id="coins">0</span>ðŸ’°</div>
    </div>
    <div id="lang-switch">
        <button class="lang-btn" data-lang="de">DE</button>
        <button class="lang-btn" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="ar">AR</button>
    </div>
    <div id="themes"></div>
    <button id="logout-btn" style="background:#f44336;">Logout</button>
</div>

<script>
// ===== Variablen =====
let currentLang = 'de';
const loginContainer = document.getElementById('login-container');
const themeContainer = document.getElementById('theme-container');
const loginMsg = document.getElementById('login-msg');
const usernameInput = document.getElementById('username');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('login-btn');
const registerBtn = document.getElementById('register-btn');
const logoutBtn = document.getElementById('logout-btn');
const themesDiv = document.getElementById('themes');
const coinsSpan = document.getElementById('coins');
const langButtons = document.querySelectorAll('.lang-btn');
const title = document.getElementById('title');
const themeTitle = document.getElementById('theme-title');

let currentUser = localStorage.getItem('currentUser');
let currentTopic, currentSubtopic, currentQuizIndex = 0;

// ===== Themen & Fragen =====
const topics = {
    "Geschichte": {
        "Deutschland": [
            {question: {"de":"Wann begann der 2. Weltkrieg?","en":"When did WWII start?","ar":"Ù…ØªÙ‰ Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ"}, answer: "1939"},
            {question: {"de":"Wer war der erste Bundeskanzler Deutschlands?","en":"Who was the first chancellor?","ar":"Ù…Ù† ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø£ÙˆÙ„ØŸ"}, answer: "Konrad Adenauer"},
			{question: {"de":"Was ist der Vorname Hitlers?","en":"What is the first name of Hitler ?","ar":"ØŸ"}, answer: "Adolf"}
        ],
		 "Europa": [
            {question: {"de":"Wann begann der 2. Weltkrieg?","en":"When did the second worldwar start?","ar":"Ù…ØªÙ‰ Ø¨Ø¯Ø£Øª Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ"}, answer: "1939"},
            {question: {"de":"wann begann der 1. Weltkrieg?","en":"When did the first worldwar start?","ar":"Ù…ØªÙ‰ Ø¨Ø¯Ø£Øª Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ø§ØŸ"}, answer: "1914"}
        ],
        "Syrien": [
            {question: {"de":"Wann wurde Syrien unabhÃ¤ngig?","en":"When did Syria become independent?","ar":"Ù…ØªÙ‰ Ø£ØµØ¨Ø­Øª Ø³ÙˆØ±ÙŠØ§ Ù…Ø³ØªÙ‚Ù„Ø©ØŸ"}, answer: "1946"},
		{question: {"de":"Wann endete der Krieg in Syrien?","en":"When the war in syria ended?","ar":"?Ù…ØªÙ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­Ø±Ø¨ ÙÙŠ Ø³ÙˆØ±ÙŠØ§"}, answer: "2024"}
			]
    },
    "Wissenschaft": {
        "Physik": [
            {question: {"de":"Wer entwickelte die RelativitÃ¤tstheorie?","en":"Who developed the theory of relativity?","ar":"Ù…Ù† Ø·ÙˆØ± Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©ØŸ"}, answer: "Einstein"}
        ],
        "Biologie": [
            {question: {"de":"Wie viele Chromosomen hat der Mensch?","en":"How many chromosomes does a human have?","ar":"ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØ±ÙˆÙ…ÙˆØ³ÙˆÙ…Ø§Øª Ù„Ø¯Ù‰ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ØŸ"}, answer: "46"}
        ]
    }
};

// ===== LocalStorage Helpers =====
function getUser(username) { return JSON.parse(localStorage.getItem('user_' + username)); }
function saveUser(username, data) { localStorage.setItem('user_' + username, JSON.stringify(data)); }

// ===== Sprache wechseln =====
langButtons.forEach(btn => {
    btn.addEventListener('click', ()=> {
        currentLang = btn.dataset.lang;
        renderUI();
        if(themeContainer.classList.contains('hidden')===false) showThemes();
    });
});

function renderUI(){
    if(currentLang==='de'){
        title.textContent='Login / Registrierung';
        loginBtn.textContent='Login';
        registerBtn.textContent='Registrieren';
        logoutBtn.textContent='Logout';
        themeTitle.textContent='Themen auswÃ¤hlen';
    } else if(currentLang==='en'){
        title.textContent='Login / Register';
        loginBtn.textContent='Login';
        registerBtn.textContent='Register';
        logoutBtn.textContent='Logout';
        themeTitle.textContent='Select Topics';
    } else if(currentLang==='ar'){
        title.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø§Ù„ØªØ³Ø¬ÙŠÙ„';
        loginBtn.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
        registerBtn.textContent='ØªØ³Ø¬ÙŠÙ„';
        logoutBtn.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';
        themeTitle.textContent='Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹';
    }
}

// ===== Registrierung =====
registerBtn.addEventListener('click', () => {
    const username = usernameInput.value.trim();
    const password = passwordInput.value.trim();
    if(!username || !password) return loginMsg.textContent=(currentLang==='de'?'Bitte ausfÃ¼llen!':'Please fill in!','Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    
    if(localStorage.getItem('user_' + username)){
        loginMsg.textContent=(currentLang==='de'?'Benutzer existiert schon!':'User already exists!','Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„');
    } else {
        localStorage.setItem('user_' + username, JSON.stringify({password, coins:0, progress:{}}));
        localStorage.setItem('currentUser', username);
        currentUser=username;
        showThemes();
    }
});

// ===== Login =====
loginBtn.addEventListener('click', () => {
    const username = usernameInput.value.trim();
    const password = passwordInput.value.trim();
    const userData = getUser(username);
    if(!userData) return loginMsg.textContent=(currentLang==='de'?'Benutzer nicht gefunden!':'User not found!','Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
    if(userData.password!==password) return loginMsg.textContent=(currentLang==='de'?'Falsches Passwort!':'Wrong password!','ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©');
    
    localStorage.setItem('currentUser', username);
    currentUser=username;
    showThemes();
});

// ===== Logout =====
logoutBtn.addEventListener('click', ()=>{ localStorage.removeItem('currentUser'); location.reload(); });

// ===== Themen anzeigen =====
function showThemes(){
    loginContainer.classList.add('hidden');
    themeContainer.classList.remove('hidden');
    const userData = getUser(currentUser);
    coinsSpan.textContent=userData.coins;
    themesDiv.innerHTML="";
    for(const topic in topics){
        const div=document.createElement('div');
        div.className='theme-block';
        div.textContent=topic;
        div.addEventListener('click', ()=>showSubtopics(topic));
        themesDiv.appendChild(div);
    }
}

// ===== Unterthemen anzeigen =====
function showSubtopics(topic){
    currentTopic=topic;
    themesDiv.innerHTML="";
    for(const sub in topics[topic]){
        const div=document.createElement('div');
        div.className='subtheme-block';
        div.textContent=sub;
        div.addEventListener('click', ()=>startQuiz(sub));
        themesDiv.appendChild(div);
    }
}

// ===== Quiz starten =====
function startQuiz(subtopic){
    currentSubtopic=subtopic;
    currentQuizIndex=0;
    renderQuiz();
}

// ===== Quiz rendern =====
function renderQuiz(){
    const quizArr = topics[currentTopic][currentSubtopic];
    if(currentQuizIndex >= quizArr.length){
        alert(currentLang==='de'?'Quiz beendet!':'Quiz Finished!','ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±');
        showSubtopics(currentTopic);
        return;
    }
    const q=quizArr[currentQuizIndex];
    const userData=getUser(currentUser);
    
    themesDiv.innerHTML=`
        <h3>${q.question[currentLang]}</h3>
        <input type="text" id="answer-input" placeholder="${currentLang==='de'?'Antwort':'Answer'}">
        <button id="submit-answer">${currentLang==='de'?'Antwort Ã¼berprÃ¼fen':'Check Answer'}</button>
        <button id="help-btn">${currentLang==='de'?'Hilfe (100 MÃ¼nzen)':'Help (100 coins)'}</button>
        <button onclick="showSubtopics('${currentTopic}')">${currentLang==='de'?'ZurÃ¼ck':'Back'}</button>
    `;
    
    document.getElementById('submit-answer').addEventListener('click', ()=>{
        const input = document.getElementById('answer-input').value.trim();
        if(input.toLowerCase()===q.answer.toLowerCase()){
            alert(currentLang==='de'?'Richtig!':'Correct!');
            userData.coins+=25;
            userData.progress[currentTopic+'_'+currentSubtopic+'_'+currentQuizIndex]=true;
            saveUser(currentUser,userData);
            coinsSpan.textContent=userData.coins;
            currentQuizIndex++;
            renderQuiz();
        } else alert(currentLang==='de'?'Falsch!':'Wrong!');
    });
    
    document.getElementById('help-btn').addEventListener('click', ()=>{
        if(userData.coins>=100){
            userData.coins-=100;
            saveUser(currentUser,userData);
            coinsSpan.textContent=userData.coins;
            alert("Buchstabe aufgedeckt: "+q.answer[0]);
        } else alert(currentLang==='de'?'Nicht genug MÃ¼nzen!':'Not enough coins!');
    });
}

// ===== Automatisch Themes anzeigen, falls bereits eingeloggt =====
if(currentUser) showThemes();
renderUI();
</script>

</body>
</html>
