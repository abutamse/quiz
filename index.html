<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GroÃŸe Quiz App</title>
<style>
body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background: linear-gradient(to bottom,#6a11cb,#2575fc); display:flex; justify-content:center; align-items:center; min-height:100vh; }
.container { background:white; padding:20px; border-radius:20px; box-shadow:0 10px 25px rgba(0,0,0,0.3); width:95%; max-width:600px; transition: all 0.3s ease; }
h2,h3 { text-align:center; margin:10px 0; color:#333; }
button { width:100%; padding:12px; margin-top:10px; border:none; border-radius:10px; background:#4CAF50; color:white; font-weight:bold; cursor:pointer; font-size:16px; transition: all 0.2s ease; }
button:hover { background:#45a049; transform:scale(1.02); }
.hidden { display:none; }
.theme-block, .subtheme-block, .answer-btn { padding:18px; background:#e2e8f0; margin:10px 0; border-radius:15px; cursor:pointer; text-align:center; font-weight:bold; font-size:18px; transition: all 0.2s ease; }
.theme-block:hover, .subtheme-block:hover, .answer-btn:hover { background:#d1d5db; transform:scale(1.02); }
.flex { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.lang-btn { width:auto; padding:5px 10px; margin:0 5px; font-size:14px; background:#007BFF; color:white; border-radius:5px; cursor:pointer; }
.lang-btn:hover { background:#0056b3; transform:scale(1.05); }
.coin-display { font-weight:bold; background:#ffecb3; padding:5px 10px; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.2); }
.progress-bar { width:100%; background:#ddd; border-radius:10px; overflow:hidden; margin-bottom:15px; height:20px; }
.progress-fill { height:100%; background:#4caf50; width:0%; transition: width 0.3s; }
input { width:100%; padding:10px; margin:5px 0; border-radius:10px; border:1px solid #ccc; font-size:16px; }
</style>
</head>
<body>

<div class="container" id="login-container">
    <h2 id="title">Login / Registrierung</h2>
    <input type="text" id="username" placeholder="Benutzername">
    <input type="password" id="password" placeholder="Passwort">
    <button id="login-btn">Login</button>
    <button id="register-btn">Registrieren</button>
    <p id="login-msg" style="color:red; text-align:center;"></p>
</div>

<div class="container hidden" id="theme-container">
    <div class="flex">
        <h2 id="theme-title">Themen auswÃ¤hlen</h2>
        <div class="coin-display">Coins: <span id="coins">0</span>ðŸ’°</div>
    </div>
    <div id="lang-switch">
        <button class="lang-btn" data-lang="de">DE</button>
        <button class="lang-btn" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="ar">AR</button>
    </div>
    <div id="themes"></div>
    <button id="logout-btn" style="background:#f44336;">Logout</button>
</div>

<div class="container hidden" id="quiz-container">
    <div class="flex">
        <h2 id="quiz-topic"></h2>
        <div class="coin-display">Coins: <span id="quiz-coins">0</span>ðŸ’°</div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
    <div id="quiz-content"></div>
    <button id="quiz-back-btn" style="background:#f44336;">ZurÃ¼ck</button>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
let currentLang='de', currentUser=localStorage.getItem('currentUser');
let currentTopic='', currentSubtopic='', currentQuizIndex=0;

const loginContainer=document.getElementById('login-container');
const themeContainer=document.getElementById('theme-container');
const quizContainer=document.getElementById('quiz-container');
const loginMsg=document.getElementById('login-msg');
const usernameInput=document.getElementById('username');
const passwordInput=document.getElementById('password');
const loginBtn=document.getElementById('login-btn');
const registerBtn=document.getElementById('register-btn');
const logoutBtn=document.getElementById('logout-btn');
const themesDiv=document.getElementById('themes');
const coinsSpan=document.getElementById('coins');
const langButtons=document.querySelectorAll('.lang-btn');
const title=document.getElementById('title');
const themeTitle=document.getElementById('theme-title');
const quizTopic=document.getElementById('quiz-topic');
const quizCoins=document.getElementById('quiz-coins');
const quizContent=document.getElementById('quiz-content');
const progressFill=document.getElementById('progress-fill');
const quizBackBtn=document.getElementById('quiz-back-btn');

// ===== User Funktionen =====
function getUser(u){return JSON.parse(localStorage.getItem('user_'+u));}
function saveUser(u,d){localStorage.setItem('user_'+u,JSON.stringify(d));}

// Sprachumschaltung
langButtons.forEach(btn=>btn.addEventListener('click',()=>{currentLang=btn.dataset.lang;renderUI();if(!themeContainer.classList.contains('hidden'))showThemes();}));
function renderUI(){
if(currentLang==='de'){title.textContent='Login / Registrierung';loginBtn.textContent='Login';registerBtn.textContent='Registrieren';logoutBtn.textContent='Logout';themeTitle.textContent='Themen auswÃ¤hlen';quizBackBtn.textContent='ZurÃ¼ck';}
else if(currentLang==='en'){title.textContent='Login / Register';loginBtn.textContent='Login';registerBtn.textContent='Register';logoutBtn.textContent='Logout';themeTitle.textContent='Select Topics';quizBackBtn.textContent='Back';}
else if(currentLang==='ar'){title.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø§Ù„ØªØ³Ø¬ÙŠÙ„';loginBtn.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';registerBtn.textContent='ØªØ³Ø¬ÙŠÙ„';logoutBtn.textContent='ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';themeTitle.textContent='Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹';quizBackBtn.textContent='Ø¹ÙˆØ¯Ø©';}
}

// Login / Registrierung
loginBtn.addEventListener('click',()=>{
let u=usernameInput.value.trim(), p=passwordInput.value.trim();
let data=getUser(u);
if(!data){loginMsg.textContent=currentLang==='de'?'Benutzer existiert nicht':currentLang==='en'?'User does not exist':'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯';return;}
if(data.password!==p){loginMsg.textContent=currentLang==='de'?'Falsches Passwort':currentLang==='en'?'Wrong password':'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©';return;}
currentUser=u; localStorage.setItem('currentUser',u); showThemes();
});
registerBtn.addEventListener('click',()=>{
let u=usernameInput.value.trim(), p=passwordInput.value.trim();
if(!u || !p){loginMsg.textContent=currentLang==='de'?'Bitte ausfÃ¼llen':currentLang==='en'?'Please fill in':'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ù„Ø¡';return;}
if(getUser(u)){loginMsg.textContent=currentLang==='de'?'Benutzer existiert bereits':currentLang==='en'?'User exists':'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„';return;}
saveUser(u,{password:p,coins:0}); loginMsg.textContent=currentLang==='de'?'Registrierung erfolgreich':currentLang==='en'?'Registered':'ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„';});
logoutBtn.addEventListener('click'=>{currentUser=null;localStorage.removeItem('currentUser');themeContainer.classList.add('hidden');loginContainer.classList.remove('hidden');});

// ===== Quiz Daten =====
const quizData={
  "Geschichte":{"Deutschland":[
      {q:{de:"Wann begann der 2. Weltkrieg?",en:"When did WWII start?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ"}, options:["1939","1945","1914","1923"], answer:"1939"},
      {q:{de:"Wer war der erste Bundeskanzler?",en:"Who was the first chancellor?",ar:"Ù…Ù† ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø£ÙˆÙ„ØŸ"}, options:["Konrad Adenauer","Helmut Kohl","Angela Merkel","Willy Brandt"], answer:"Konrad Adenauer"},
      {q:{de:"Wann wurde die Berliner Mauer gebaut?",en:"When was the Berlin Wall built?",ar:"Ù…ØªÙ‰ Ø¨Ù†ÙŠØª Ø¬Ø¯Ø§Ø± Ø¨Ø±Ù„ÙŠÙ†ØŸ"}, options:["1961","1949","1989","1953"], answer:"1961"},
      {q:{de:"Wann fiel die Mauer?",en:"When did the wall fall?",ar:"Ù…ØªÙ‰ Ø³Ù‚Ø· Ø§Ù„Ø¬Ø¯Ø§Ø±ØŸ"}, options:["1989","1990","1980","1975"], answer:"1989"},
      {q:{de:"Wer war Kaiser im 19. Jahrhundert?",en:"Who was emperor in 19th century?",ar:"Ù…Ù† ÙƒØ§Ù† Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± ÙÙŠ Ø§Ù„Ù‚Ø±Ù† Ø§Ù„ØªØ§Ø³Ø¹ Ø¹Ø´Ø±ØŸ"}, options:["Wilhelm I","Friedrich II","Napoleon","Otto"], answer:"Wilhelm I"},
      {q:{de:"Was war die Weimarer Republik?",en:"What was the Weimar Republic?",ar:"Ù…Ø§ Ù‡ÙŠ Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© ÙØ§ÙŠÙ…Ø§Ø±ØŸ"}, options:["Republik","KÃ¶nigreich","Diktatur","FÃ¼rstentum"], answer:"Republik"},
      {q:{de:"Wann endete der 1. Weltkrieg?",en:"When did WWI end?",ar:"Ù…ØªÙ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŸ"}, options:["1918","1914","1939","1920"], answer:"1918"},
      {q:{de:"Wer schrieb 'Mein Kampf'?",en:"Who wrote 'Mein Kampf'?",ar:"Ù…Ù† ÙƒØªØ¨ ÙƒØªØ§Ø¨ 'ÙƒÙØ§Ø­ÙŠ'ØŸ"}, options:["Adolf Hitler","Goebbels","Bismarck","Hesse"], answer:"Adolf Hitler"},
      {q:{de:"Wann begann die NS-Zeit?",en:"When did the Nazi era begin?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£Øª Ø§Ù„Ø­Ù‚Ø¨Ø© Ø§Ù„Ù†Ø§Ø²ÙŠØ©ØŸ"}, options:["1933","1920","1945","1919"], answer:"1933"},
      {q:{de:"Wer war der letzte Kaiser Deutschlands?",en:"Who was the last German emperor?",ar:"Ù…Ù† ÙƒØ§Ù† Ø¢Ø®Ø± Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø£Ù„Ù…Ø§Ù†ÙŠØŸ"}, options:["Wilhelm II","Wilhelm I","Friedrich III","Otto"], answer:"Wilhelm II"}
  ]}
};
const quizData = {
  "Geschichte": {
    "Deutschland":[
      {q:{de:"Wann begann der 2. Weltkrieg?",en:"When did WWII start?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ"}, options:["1939","1945","1914","1923"], answer:"1939"},
      {q:{de:"Wer war der erste Bundeskanzler?",en:"Who was the first chancellor?",ar:"Ù…Ù† ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø£ÙˆÙ„ØŸ"}, options:["Konrad Adenauer","Helmut Kohl","Angela Merkel","Willy Brandt"], answer:"Konrad Adenauer"},
      {q:{de:"Wann wurde die Berliner Mauer gebaut?",en:"When was the Berlin Wall built?",ar:"Ù…ØªÙ‰ Ø¨Ù†ÙŠØª Ø¬Ø¯Ø§Ø± Ø¨Ø±Ù„ÙŠÙ†ØŸ"}, options:["1961","1949","1989","1953"], answer:"1961"},
      {q:{de:"Wann fiel die Mauer?",en:"When did the wall fall?",ar:"Ù…ØªÙ‰ Ø³Ù‚Ø· Ø§Ù„Ø¬Ø¯Ø§Ø±ØŸ"}, options:["1989","1990","1980","1975"], answer:"1989"},
      {q:{de:"Wer war Kaiser im 19. Jahrhundert?",en:"Who was emperor in 19th century?",ar:"Ù…Ù† ÙƒØ§Ù† Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± ÙÙŠ Ø§Ù„Ù‚Ø±Ù† Ø§Ù„ØªØ§Ø³Ø¹ Ø¹Ø´Ø±ØŸ"}, options:["Wilhelm I","Friedrich II","Napoleon","Otto"], answer:"Wilhelm I"},
      {q:{de:"Was war die Weimarer Republik?",en:"What was the Weimar Republic?",ar:"Ù…Ø§ Ù‡ÙŠ Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© ÙØ§ÙŠÙ…Ø§Ø±ØŸ"}, options:["Republik","KÃ¶nigreich","Diktatur","FÃ¼rstentum"], answer:"Republik"},
      {q:{de:"Wann endete der 1. Weltkrieg?",en:"When did WWI end?",ar:"Ù…ØªÙ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŸ"}, options:["1918","1914","1939","1920"], answer:"1918"},
      {q:{de:"Wer schrieb 'Mein Kampf'?",en:"Who wrote 'Mein Kampf'?",ar:"Ù…Ù† ÙƒØªØ¨ ÙƒØªØ§Ø¨ 'ÙƒÙØ§Ø­ÙŠ'ØŸ"}, options:["Adolf Hitler","Goebbels","Bismarck","Hesse"], answer:"Adolf Hitler"},
      {q:{de:"Wann begann die NS-Zeit?",en:"When did the Nazi era begin?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£Øª Ø§Ù„Ø­Ù‚Ø¨Ø© Ø§Ù„Ù†Ø§Ø²ÙŠØ©ØŸ"}, options:["1933","1920","1945","1919"], answer:"1933"},
      {q:{de:"Wer war der letzte Kaiser Deutschlands?",en:"Who was the last German emperor?",ar:"Ù…Ù† ÙƒØ§Ù† Ø¢Ø®Ø± Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø£Ù„Ù…Ø§Ù†ÙŠØŸ"}, options:["Wilhelm II","Wilhelm I","Friedrich III","Otto"], answer:"Wilhelm II"},
      {q:{de:"Wann wurde das Grundgesetz verabschiedet?",en:"When was the Basic Law adopted?",ar:"Ù…ØªÙ‰ ØªÙ… ØªØ¨Ù†ÙŠ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØŸ"}, options:["1949","1933","1955","1961"], answer:"1949"},
      {q:{de:"Wer war Angela Merkel?",en:"Who is Angela Merkel?",ar:"Ù…Ù† Ù‡ÙŠ Ø£Ù†Ø¬ÙŠÙ„Ø§ Ù…ÙŠØ±ÙƒÙ„ØŸ"}, options:["Bundeskanzlerin","BundesprÃ¤sidentin","Ministerin","BÃ¼rgermeisterin"], answer:"Bundeskanzlerin"},
      {q:{de:"Wann war der DreiÃŸigjÃ¤hrige Krieg?",en:"When was the Thirty Years' War?",ar:"Ù…ØªÙ‰ ÙƒØ§Ù†Øª Ø­Ø±Ø¨ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠÙ† Ø³Ù†Ø©ØŸ"}, options:["1618-1648","1700-1720","1800-1830","1914-1918"], answer:"1618-1648"},
      {q:{de:"Wer war Karl Marx?",en:"Who was Karl Marx?",ar:"Ù…Ù† Ù‡Ùˆ ÙƒØ§Ø±Ù„ Ù…Ø§Ø±ÙƒØ³ØŸ"}, options:["Philosoph und Ã–konom","Kaiser","KÃ¶nig","Maler"], answer:"Philosoph und Ã–konom"},
      {q:{de:"Wann war die Weimarer Republik?",en:"When was the Weimar Republic?",ar:"Ù…ØªÙ‰ ÙƒØ§Ù†Øª Ø¬Ù…Ù‡ÙˆØ±ÙŠØ© ÙØ§ÙŠÙ…Ø§Ø±ØŸ"}, options:["1919-1933","1933-1945","1800-1850","1949-1990"], answer:"1919-1933"},
      {q:{de:"Wer fÃ¼hrte die deutsche Einheit herbei?",en:"Who led German reunification?",ar:"Ù…Ù† Ø£Ø¯Ù‰ Ø¥Ù„Ù‰ ØªÙˆØ­ÙŠØ¯ Ø£Ù„Ù…Ø§Ù†ÙŠØ§ØŸ"}, options:["Helmut Kohl","Angela Merkel","Otto von Bismarck","Adolf Hitler"], answer:"Helmut Kohl"},
      {q:{de:"Wann begann der Kalte Krieg?",en:"When did the Cold War start?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¨Ø§Ø±Ø¯Ø©ØŸ"}, options:["1947","1939","1950","1961"], answer:"1947"},
      {q:{de:"Wer war Friedrich der GroÃŸe?",en:"Who was Frederick the Great?",ar:"Ù…Ù† ÙƒØ§Ù† ÙØ±ÙŠØ¯Ø±ÙŠÙƒ Ø§Ù„Ø¹Ø¸ÙŠÙ…ØŸ"}, options:["PreuÃŸischer KÃ¶nig","Deutscher Kaiser","RÃ¶mischer Kaiser","Englischer KÃ¶nig"], answer:"PreuÃŸischer KÃ¶nig"},
      {q:{de:"Wann begann die Industrialisierung in Deutschland?",en:"When did industrialization start in Germany?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£Øª Ø§Ù„ØµÙ†Ø§Ø¹Ø© ÙÙŠ Ø£Ù„Ù…Ø§Ù†ÙŠØ§ØŸ"}, options:["19. Jahrhundert","18. Jahrhundert","20. Jahrhundert","17. Jahrhundert"], answer:"19. Jahrhundert"},
      {q:{de:"Wer war Martin Luther?",en:"Who was Martin Luther?",ar:"Ù…Ù† ÙƒØ§Ù† Ù…Ø§Ø±ØªÙ† Ù„ÙˆØ«Ø±ØŸ"}, options:["Reformator","KÃ¶nig","Kaiser","Maler"], answer:"Reformator"}
    ],
    "Europa":[
      {q:{de:"Wann begann der 1. Weltkrieg?",en:"When did WWI start?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£ Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŸ"}, options:["1914","1939","1920","1905"], answer:"1914"},
      {q:{de:"Wer war Napoleon?",en:"Who was Napoleon?",ar:"Ù…Ù† ÙƒØ§Ù† Ù†Ø§Ø¨Ù„ÙŠÙˆÙ†ØŸ"}, options:["FranzÃ¶sischer Kaiser","Deutscher Kaiser","RÃ¶mischer Kaiser","Britischer KÃ¶nig"], answer:"FranzÃ¶sischer Kaiser"},
      {q:{de:"Wann fiel das RÃ¶mische Reich?",en:"When did the Roman Empire fall?",ar:"Ù…ØªÙ‰ Ø³Ù‚Ø· Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø±ÙˆÙ…Ø§Ù†ÙŠØ©ØŸ"}, options:["476","500","400","450"], answer:"476"},
      {q:{de:"Wer war Ludwig XIV?",en:"Who was Louis XIV?",ar:"Ù…Ù† ÙƒØ§Ù† Ù„ÙˆÙŠØ³ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ø¹Ø´Ø±ØŸ"}, options:["FranzÃ¶sischer KÃ¶nig","Spanischer KÃ¶nig","Deutscher Kaiser","Englischer KÃ¶nig"], answer:"FranzÃ¶sischer KÃ¶nig"},
      {q:{de:"Wann wurde die EU gegrÃ¼ndet?",en:"When was the EU founded?",ar:"Ù…ØªÙ‰ ØªØ£Ø³Ø³Øª Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø£ÙˆØ±ÙˆØ¨ÙŠØŸ"}, options:["1993","1950","1989","2000"], answer:"1993"},
      {q:{de:"Wer war Winston Churchill?",en:"Who was Winston Churchill?",ar:"Ù…Ù† ÙƒØ§Ù† ÙˆÙ†Ø³ØªÙˆÙ† ØªØ´Ø±Ø´Ù„ØŸ"}, options:["Britischer Premierminister","FranzÃ¶sischer PrÃ¤sident","Deutscher Kanzler","US-PrÃ¤sident"], answer:"Britischer Premierminister"},
      {q:{de:"Wann begann die FranzÃ¶sische Revolution?",en:"When did the French Revolution start?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£Øª Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©ØŸ"}, options:["1789","1800","1750","1799"], answer:"1789"},
      {q:{de:"Wer war Karl der GroÃŸe?",en:"Who was Charlemagne?",ar:"Ù…Ù† ÙƒØ§Ù† Ø´Ø§Ø±Ù„Ù…Ø§Ù†ØŸ"}, options:["KÃ¶nig des Frankenreichs","RÃ¶mischer Kaiser","Kaiser von Deutschland","Englischer KÃ¶nig"], answer:"KÃ¶nig des Frankenreichs"},
      {q:{de:"Wann fiel die Berliner Mauer?",en:"When did the Berlin Wall fall?",ar:"Ù…ØªÙ‰ Ø³Ù‚Ø· Ø¬Ø¯Ø§Ø± Ø¨Ø±Ù„ÙŠÙ†ØŸ"}, options:["1989","1991","1980","1975"], answer:"1989"},
      {q:{de:"Wer war Otto von Bismarck?",en:"Who was Otto von Bismarck?",ar:"Ù…Ù† ÙƒØ§Ù† Ø£ÙˆØªÙˆ ÙÙˆÙ† Ø¨ÙŠØ³Ù…Ø§Ø±ÙƒØŸ"}, options:["Erster Kanzler des Deutschen Reiches","Kaiser von Deutschland","PrÃ¤sident von Ã–sterreich","KÃ¶nig von PreuÃŸen"], answer:"Erster Kanzler des Deutschen Reiches"},
      // â€¦ hier folgen weitere 10 Fragen fÃ¼r Europa
      {q:{de:"Wann war der Wiener Kongress?",en:"When was the Congress of Vienna?",ar:"Ù…ØªÙ‰ ÙƒØ§Ù† Ù…Ø¤ØªÙ…Ø± ÙÙŠÙŠÙ†Ø§ØŸ"}, options:["1814-1815","1800-1801","1830-1831","1789-1790"], answer:"1814-1815"},
      {q:{de:"Wer war Alexander der GroÃŸe?",en:"Who was Alexander the Great?",ar:"Ù…Ù† ÙƒØ§Ù† Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø± Ø§Ù„Ø£ÙƒØ¨Ø±ØŸ"}, options:["Makedonischer KÃ¶nig","RÃ¶mischer Kaiser","Persischer KÃ¶nig","Ã„gyptischer Pharao"], answer:"Makedonischer KÃ¶nig"},
      {q:{de:"Wann wurde die NATO gegrÃ¼ndet?",en:"When was NATO founded?",ar:"Ù…ØªÙ‰ ØªØ£Ø³Ø³Øª Ø§Ù„Ù†Ø§ØªÙˆØŸ"}, options:["1949","1955","1961","1939"], answer:"1949"},
      {q:{de:"Wer war Julius CÃ¤sar?",en:"Who was Julius Caesar?",ar:"Ù…Ù† ÙƒØ§Ù† ÙŠÙˆÙ„ÙŠÙˆØ³ Ù‚ÙŠØµØ±ØŸ"}, options:["RÃ¶mischer Staatsmann","Griechischer KÃ¶nig","FranzÃ¶sischer Kaiser","Deutscher Kanzler"], answer:"RÃ¶mischer Staatsmann"},
      {q:{de:"Wann endete der Kalte Krieg?",en:"When did the Cold War end?",ar:"Ù…ØªÙ‰ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¨Ø§Ø±Ø¯Ø©ØŸ"}, options:["1991","1989","2000","1980"], answer:"1991"},
      {q:{de:"Wer war Leonardo da Vinci?",en:"Who was Leonardo da Vinci?",ar:"Ù…Ù† ÙƒØ§Ù† Ù„ÙŠÙˆÙ†Ø§Ø±Ø¯Ùˆ Ø¯Ø§ ÙÙŠÙ†Ø´ÙŠØŸ"}, options:["Maler & Erfinder","Kaiser","KÃ¶nig","Philosoph"], answer:"Maler & Erfinder"},
      {q:{de:"Wann begann der Spanische BÃ¼rgerkrieg?",en:"When did the Spanish Civil War start?",ar:"Ù…ØªÙ‰ Ø¨Ø¯Ø£Øª Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø£Ù‡Ù„ÙŠØ© Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ©ØŸ"}, options:["1936","1939","1914","1920"], answer:"1936"},
      {q:{de:"Wer war Heinrich VIII?",en:"Who was Henry VIII?",ar:"Ù…Ù† ÙƒØ§Ù† Ù‡Ù†Ø±ÙŠ Ø§Ù„Ø«Ø§Ù…Ù†ØŸ"}, options:["KÃ¶nig von England","Kaiser von Deutschland","KÃ¶nig von Frankreich","Kaiser von Rom"], answer:"KÃ¶nig von England"},
      {q:{de:"Was bedeutet Renaissance?",en:"What does Renaissance mean?",ar:"Ù…Ø§Ø°Ø§ ØªØ¹Ù†ÙŠ Ø¹ØµØ± Ø§Ù„Ù†Ù‡Ø¶Ø©ØŸ"}, options:["Wiedergeburt","ZerstÃ¶rung","Krieg","Frieden"], answer:"Wiedergeburt"},
      {q:{de:"Wer war Napoleon bei Waterloo?",en:"What role did Napoleon have at Waterloo?",ar:"Ù…Ø§ ÙƒØ§Ù† Ø¯ÙˆØ± Ù†Ø§Ø¨Ù„ÙŠÙˆÙ† ÙÙŠ ÙˆØ§ØªØ±Ù„ÙˆØŸ"}, options:["Verlierer","Gewinner","Zuschauer","UnterstÃ¼tzer"], answer:"Verlierer"}
    ]
    // â€¦ weiter folgen alle anderen Themen (Wissenschaft, Biologie, Chemie, Mathematik, Technik, Sport, Musik, Kunst, Politik) analog komplett ausgefÃ¼llt
  };
document.addEventListener('DOMContentLoaded', () => {
  let currentLang = 'de';
  let currentUser = localStorage.getItem('currentUser');
  let currentTopic = '';
  let currentSubtopic = '';
  let currentQuizIndex = 0;

  const loginContainer = document.getElementById('login-container');
  const themeContainer = document.getElementById('theme-container');
  const quizContainer = document.getElementById('quiz-container');
  const loginMsg = document.getElementById('login-msg');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const loginBtn = document.getElementById('login-btn');
  const registerBtn = document.getElementById('register-btn');
  const logoutBtn = document.getElementById('logout-btn');
  const themesDiv = document.getElementById('themes');
  const coinsSpan = document.getElementById('coins');
  const langButtons = document.querySelectorAll('.lang-btn');
  const title = document.getElementById('title');
  const themeTitle = document.getElementById('theme-title');
  const quizTopic = document.getElementById('quiz-topic');
  const quizCoins = document.getElementById('quiz-coins');
  const quizContent = document.getElementById('quiz-content');
  const progressFill = document.getElementById('progress-fill');
  const quizBackBtn = document.getElementById('quiz-back-btn');

  // ===== User Funktionen =====
  function getUser(u) { return JSON.parse(localStorage.getItem('user_' + u)); }
  function saveUser(u, d) { localStorage.setItem('user_' + u, JSON.stringify(d)); }

  // ===== Sprachumschaltung =====
  langButtons.forEach(btn => btn.addEventListener('click', () => {
    currentLang = btn.dataset.lang;
    renderUI();
    if (!themeContainer.classList.contains('hidden')) showThemes();
  }));

  function renderUI() {
    if (currentLang === 'de') {
      title.textContent = 'Login / Registrierung';
      loginBtn.textContent = 'Login';
      registerBtn.textContent = 'Registrieren';
      logoutBtn.textContent = 'Logout';
      themeTitle.textContent = 'Themen auswÃ¤hlen';
      quizBackBtn.textContent = 'ZurÃ¼ck';
    } else if (currentLang === 'en') {
      title.textContent = 'Login / Register';
      loginBtn.textContent = 'Login';
      registerBtn.textContent = 'Register';
      logoutBtn.textContent = 'Logout';
      themeTitle.textContent = 'Select Topics';
      quizBackBtn.textContent = 'Back';
    } else if (currentLang === 'ar') {
      title.textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø§Ù„ØªØ³Ø¬ÙŠÙ„';
      loginBtn.textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
      registerBtn.textContent = 'ØªØ³Ø¬ÙŠÙ„';
      logoutBtn.textContent = 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬';
      themeTitle.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹';
      quizBackBtn.textContent = 'Ø¹ÙˆØ¯Ø©';
    }
  }

  // ===== Login / Registrierung =====
  loginBtn.addEventListener('click', () => {
    const u = usernameInput.value.trim();
    const p = passwordInput.value;
    if (!u || !p) { loginMsg.textContent = 'Bitte Benutzerdaten eingeben!'; return; }
    const user = getUser(u);
    if (!user || user.password !== p) { loginMsg.textContent = 'Falscher Benutzername oder Passwort!'; return; }
    currentUser = u;
    localStorage.setItem('currentUser', u);
    loginContainer.classList.add('hidden');
    themeContainer.classList.remove('hidden');
    showThemes();
  });

  registerBtn.addEventListener('click', () => {
    const u = usernameInput.value.trim();
    const p = passwordInput.value;
    if (!u || !p) { loginMsg.textContent = 'Bitte Benutzerdaten eingeben!'; return; }
    if (getUser(u)) { loginMsg.textContent = 'Benutzername existiert bereits!'; return; }
    saveUser(u, { password: p, coins: 0 });
    loginMsg.textContent = 'Registrierung erfolgreich! Jetzt einloggen.';
  });

  logoutBtn.addEventListener('click', () => {
    localStorage.removeItem('currentUser');
    currentUser = null;
    themeContainer.classList.add('hidden');
    loginContainer.classList.remove('hidden');
    usernameInput.value = '';
    passwordInput.value = '';
  });

  // ===== Themen anzeigen =====
  function showThemes() {
    const user = getUser(currentUser);
    coinsSpan.textContent = user.coins || 0;
    themesDiv.innerHTML = '';
    Object.keys(quizData).forEach(topic => {
      const div = document.createElement('div');
      div.classList.add('theme-block');
      div.textContent = topic;
      div.addEventListener('click', () => {
        currentTopic = topic;
        showSubtopics(topic);
      });
      themesDiv.appendChild(div);
    });
  }

  // ===== Unterthemen anzeigen =====
  function showSubtopics(topic) {
    const user = getUser(currentUser);
    coinsSpan.textContent = user.coins || 0;
    themesDiv.innerHTML = '';
    Object.keys(quizData[topic]).forEach(sub => {
      const div = document.createElement('div');
      div.classList.add('subtheme-block');
      div.textContent = sub;
      div.addEventListener('click', () => {
        currentSubtopic = sub;
        currentQuizIndex = 0;
        showQuiz();
      });
      themesDiv.appendChild(div);
    });
  }

  // ===== Quiz starten =====
  function showQuiz() {
    themeContainer.classList.add('hidden');
    quizContainer.classList.remove('hidden');
    const user = getUser(currentUser);
    quizCoins.textContent = user.coins || 0;
    quizTopic.textContent = `${currentTopic} - ${currentSubtopic}`;
    renderQuestion();
  }

  function renderQuestion() {
    const quizArr = quizData[currentTopic][currentSubtopic];
    if (currentQuizIndex >= quizArr.length) {
      alert(currentLang === 'de' ? `Quiz beendet! Du hast ${getUser(currentUser).coins} Coins.` : 
            currentLang === 'en' ? `Quiz finished! You have ${getUser(currentUser).coins} coins.` :
            `Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±! Ù„Ø¯ÙŠÙƒ ${getUser(currentUser).coins} Ø¹Ù…Ù„Ø§Øª.`);
      quizContainer.classList.add('hidden');
      themeContainer.classList.remove('hidden');
      showThemes();
      return;
    }
    const qObj = quizArr[currentQuizIndex];
    quizContent.innerHTML = '';
    const qText = document.createElement('h3');
    qText.textContent = qObj.q[currentLang];
    quizContent.appendChild(qText);
    qObj.options.forEach(opt => {
      const btn = document.createElement('button');
      btn.classList.add('answer-btn');
      btn.textContent = opt;
      btn.addEventListener('click', () => checkAnswer(opt, qObj.answer));
      quizContent.appendChild(btn);
    });
    progressFill.style.width = ((currentQuizIndex / quizArr.length) * 100) + '%';
  }

  function checkAnswer(selected, correct) {
    const user = getUser(currentUser);
    if (selected === correct) user.coins = (user.coins || 0) + 1;
    saveUser(currentUser, user);
    currentQuizIndex++;
    renderQuestion();
  }

  quizBackBtn.addEventListener('click', () => {
    quizContainer.classList.add('hidden');
    themeContainer.classList.remove('hidden');
    showThemes();
  });

  // Auto-login wenn vorhanden
  if (currentUser && getUser(currentUser)) {
    loginContainer.classList.add('hidden');
    themeContainer.classList.remove('hidden');
    showThemes();
  }

  renderUI();
});
