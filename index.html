<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Big Quiz</title>

<style>
body {
  font-family:Segoe UI, sans-serif;
  margin:0;
  background:linear-gradient(to bottom,#6a11cb,#2575fc);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
[dir="rtl"] { direction: rtl; text-align: right; }

.container {
  background:#fff;
  padding:20px;
  border-radius:20px;
  width:95%;
  max-width:600px;
  box-shadow:0 10px 25px rgba(0,0,0,0.3);
}
.hidden { display:none; }

h2,h3 { text-align:center; }
button {
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:10px;
  background:#4CAF50;
  color:#fff;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
}
.theme,.sub,.answer {
  background:#4CAF50;
  color:white;
  padding:16px;
  margin:10px 0;
  border-radius:15px;
  text-align:center;
  cursor:pointer;
}
.top {
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.badge {
  background:#ffecb3;
  padding:5px 10px;
  border-radius:10px;
  font-weight:bold;
}
.progress {
  width:100%;
  height:20px;
  background:#ddd;
  border-radius:10px;
  overflow:hidden;
}
.fill {
  height:100%;
  background:#4CAF50;
  width:0%;
}
#result {
  margin-top:10px;
  padding:10px;
  text-align:center;
  font-weight:bold;
  border-radius:10px;
  display:none;
}
</style>
</head>

<body>

<div class="container" id="app">

<div id="lang">
  <button onclick="setLang('de')">DE</button>
  <button onclick="setLang('en')">EN</button>
  <button onclick="setLang('ar')">AR</button>
</div>

<div id="themes"></div>

<div id="quiz" class="hidden">
  <div class="top">
    <h3 id="quizTitle"></h3>
    <div class="badge">üí∞ <span id="coins">0</span> | ‚≠ê <span id="level">1</span></div>
  </div>
  <div class="progress"><div class="fill" id="fill"></div></div>
  <div id="question"></div>
  <div id="answers"></div>
  <div id="result"></div>
  <button onclick="back()">‚¨Ö Back</button>
</div>

</div>

<script>
// =================== JSON QUIZDATEN ===================
const quizJSON = {
  history: {
    label:{de:"Geschichte",en:"History",ar:"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ"},
    germany:{
      label:{de:"Deutschland",en:"Germany",ar:"ÿ£ŸÑŸÖÿßŸÜŸäÿß"},
      questions:[
        {
          q:{de:"Wann begann der 2. Weltkrieg?",en:"When did WWII start?",ar:"ŸÖÿ™Ÿâ ÿ®ÿØÿ£ÿ™ ÿßŸÑÿ≠ÿ±ÿ® ÿßŸÑÿπÿßŸÑŸÖŸäÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ©ÿü"},
          options:{
            de:["1939","1945","1914","1923"],
            en:["1939","1945","1914","1923"],
            ar:["1939","1945","1914","1923"]
          },
          answer:{de:"1939",en:"1939",ar:"1939"}
        }
      ]
    }
  },
  science:{
    label:{de:"Wissenschaft",en:"Science",ar:"ÿßŸÑÿπŸÑŸàŸÖ"},
    physics:{
      label:{de:"Physik",en:"Physics",ar:"ÿßŸÑŸÅŸäÿ≤Ÿäÿßÿ°"},
      questions:[
        {
          q:{de:"Wer entwickelte die Relativit√§tstheorie?",en:"Who developed relativity?",ar:"ŸÖŸÜ ÿ∑Ÿàÿ± ŸÜÿ∏ÿ±Ÿäÿ© ÿßŸÑŸÜÿ≥ÿ®Ÿäÿ©ÿü"},
          options:{
            de:["Einstein","Newton","Tesla","Galileo"],
            en:["Einstein","Newton","Tesla","Galileo"],
            ar:["ÿ¢ŸäŸÜÿ¥ÿ™ÿßŸäŸÜ","ŸÜŸäŸàÿ™ŸÜ","ÿ™ÿ≥ŸÑÿß","ÿ∫ÿßŸÑŸäŸÑŸäŸà"]
          },
          answer:{de:"Einstein",en:"Einstein",ar:"ÿ¢ŸäŸÜÿ¥ÿ™ÿßŸäŸÜ"}
        }
      ]
    }
  }
};

// =================== STATE ===================
let lang="de";
let topic,sub,qIndex=0;
let coins=Number(localStorage.getItem("coins"))||0;
let level=Number(localStorage.getItem("level"))||1;

// =================== UTIL ===================
const shuffle=a=>[...a].sort(()=>Math.random()-0.5);

// =================== SPRACHE ===================
function setLang(l){
  lang=l;
  document.documentElement.dir = l==="ar"?"rtl":"ltr";
  renderThemes();
}

// =================== THEMEN ===================
function renderThemes(){
  document.getElementById("quiz").classList.add("hidden");
  const t=document.getElementById("themes");
  t.innerHTML="";
  Object.keys(quizJSON).forEach(k=>{
    const d=document.createElement("div");
    d.className="theme";
    d.textContent=quizJSON[k].label[lang];
    d.onclick=()=>renderSubs(k);
    t.appendChild(d);
  });
}

// =================== SUB ===================
function renderSubs(k){
  topic=k;
  const t=document.getElementById("themes");
  t.innerHTML="";
  Object.keys(quizJSON[k]).forEach(s=>{
    if(s==="label")return;
    const d=document.createElement("div");
    d.className="sub";
    d.textContent=quizJSON[k][s].label[lang];
    d.onclick=()=>startQuiz(s);
    t.appendChild(d);
  });
}

// =================== QUIZ ===================
function startQuiz(s){
  sub=s; qIndex=0;
  document.getElementById("themes").innerHTML="";
  document.getElementById("quiz").classList.remove("hidden");
  updateStats();
  showQuestion();
}

function showQuestion(){
  const q=quizJSON[topic][sub].questions[qIndex];
  if(!q){ back(); return; }

  document.getElementById("quizTitle").textContent=
    quizJSON[topic][sub].label[lang];

  document.getElementById("question").textContent=q.q[lang];
  const a=document.getElementById("answers");
  a.innerHTML="";
  shuffle(q.options[lang]).forEach(o=>{
    const b=document.createElement("button");
    b.className="answer";
    b.textContent=o;
    b.onclick=()=>check(o);
    a.appendChild(b);
  });

  document.getElementById("fill").style.width=
    (qIndex/quizJSON[topic][sub].questions.length*100)+"%";
}

function check(ans){
  const q=quizJSON[topic][sub].questions[qIndex];
  const r=document.getElementById("result");
  if(ans===q.answer[lang]){
    coins+=25;
    if(coins>=level*100){ level++; }
    r.textContent=lang==="de"?"Richtig!":lang==="en"?"Correct!":"ÿµÿ≠Ÿäÿ≠!";
    r.style.background="#4CAF50";
  }else{
    r.textContent=lang==="de"?"Falsch!":lang==="en"?"Wrong!":"ÿÆÿ∑ÿ£!";
    r.style.background="#f44336";
  }
  save();
  updateStats();
  r.style.display="block";
  qIndex++;
  setTimeout(()=>{r.style.display="none";showQuestion();},1000);
}

// =================== STATS ===================
function updateStats(){
  document.getElementById("coins").textContent=coins;
  document.getElementById("level").textContent=level;
}
function save(){
  localStorage.setItem("coins",coins);
  localStorage.setItem("level",level);
}

// =================== BACK ===================
function back(){
  document.getElementById("quiz").classList.add("hidden");
  renderThemes();
}

// =================== INIT ===================
renderThemes();
updateStats();
</script>

</body>
</html>
